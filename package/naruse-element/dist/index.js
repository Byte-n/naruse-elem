var e={79:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=79,e.exports=t}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=new class{constructor(){this.listeners={}}on(e,t){void 0===this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){if(void 0===this.listeners[e])return;const s=this.listeners[e].indexOf(t);-1!==s&&this.listeners[e].splice(s,1)}emit(e,...t){void 0!==this.listeners[e]&&this.listeners[e].forEach((e=>{e(...t)}))}};class t{constructor(e,t){this.state={},this.componentId=t,((e,t)=>{const s=Object.keys(e);s.includes("render")||console.error("naruse-fake-react-runtime 必须要一个render函数"),s.forEach((s=>{"constructor"===s&&(t.init=e[s].bind(t)),"function"==typeof e[s]?t[s]=e[s].bind(t):t[s]=e[s]}))})(e,this),e.constructor&&e.constructor.call(this),this._isFristRender=!0,this._isUpdating=!1}_render(){return[this.render&&this.render()||{},()=>{this._isFristRender?this.componentDidMount&&this.componentDidMount():this.componentDidUpdate&&this.componentDidUpdate(),this._isFristRender=!1}]}setState(t){t!==this.state&&(this.state={...this.state,...t},!this._isUpdating&&Promise.resolve().then((()=>{e.emit(`update-${this.componentId}`),this._isUpdating=!1})),this._isUpdating=!0)}}const r=["text"],n=function(e,t){const s=[];if(t.id===e)return s;if(t.childNodes&&t.childNodes.length){for(let r=0;r<t.childNodes.length;r++)if(t.childNodes[r].id===e)return s.push(r),s;for(let r=0;r<t.childNodes.length;r++){const i=n(e,t.childNodes[r]);if(i){s.push(r);for(let e=0;e<i.length;e++)s.push(i[e]);return s}}}},i=function(e,t){const s=e;return"object"!=typeof e?e:(s.id||(s.id=(e=>{let t=Date.now().toString(36);return t+=Math.random().toString(36).slice(2,16),t})()),s.parentId=t,Array.isArray(s.childNodes)&&s.childNodes.forEach((e=>i(e,s.id))),s)},o={tap:"onClick",longPress:"onLongClick",input:"onChange",blur:"onBlur",focus:"onFocus"},a=function(e,t){if(!(e&&e.target&&e.target.id))return;const s=function(e,t){const s=n(e,t);if(!s)return;if(!s.length)return t;let r=t;return s.forEach((e=>{r=r.childNodes[e]})),r}(e.target.id,t);if(!s)return;const{type:i}=e,p=o[i];p||console.log("[naruse-element][warn]",`${p}事件不支持`);const h=s[p];h&&"function"==typeof h&&(console.log("[naruse-element][debugger]",`元素${s.naruseType}:触发${p}事件`),h.call(s,e)),r.includes(s.naruseType)&&(console.log("[naruse-element][debugger]",`元素${s.naruseType}: 冒泡${p}事件`),a({...e,target:{id:s.parentId}},t))};function p(e){a(e,this.data.node)}const h={props:{code:'exports.render = function () { return h("view", null, "你好") }'},data:{node:{}},methods:{onTap:p,onLongPress:p,onInputInput:p,onInputBlur:p,onInputFocus:p}},c=["\n","\t"," ","\r"],l={num:"num",string:"string",name:"name",bracketL:"[",bracketR:"]",braceL:"{",braceR:"}",parenL:"(",parenR:")",comma:",",semi:";",colon:":",dot:".",question:"?",eq:"=",logicalOR:"||",logicalAND:"&&",bitwiseOR:"|",bitwiseXOR:"^",bitwiseAND:"&",plusMin:"+/-",incDec:"++/--",equality:"==/!=/===/!==",relational:"</>/<=/>=",prefix:"!/~",modulo:"%",star:"*",assign:"_=",_break:"break",_continue:"continue",_else:"else",_for:"for",_function:"function",_if:"if",_return:"return",_var:"var",_const:"const",_let:"let",_import:"import",_null:"null",_true:"true",_false:"false"},u=[l._break,l._continue,l._else,l._for,l._function,l._if,l._return,l._const,l._let,l._null,l._false,l._true,l._var],d={[l.logicalOR]:1,[l.logicalAND]:2,[l.bitwiseOR]:3,[l.bitwiseAND]:5,[l.equality]:6,[l.relational]:7,[l.plusMin]:9,[l.modulo]:10,[l.star]:10};class f{pos=0;input="";tokens=[];constructor(e){this.input=e}scan(){for(;;){const t=this.input[this.pos];if(e=t,c.includes(e))this.pos++;else{if(!t)break;t.match(/[a-zA-Z\_\$]/)?this.readWord():this.getTokenFromCode(t.charCodeAt())}}var e;return this.tokens}getTokenFromCode(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.ftk(l.parenL);case 41:return++this.pos,this.ftk(l.parenR);case 59:return++this.pos,this.ftk(l.semi);case 63:return++this.pos,this.ftk(l.question);case 44:return++this.pos,this.ftk(l.comma);case 91:return++this.pos,this.ftk(l.bracketL);case 93:return++this.pos,this.ftk(l.bracketR);case 123:return++this.pos,this.ftk(l.braceL);case 125:return++this.pos,this.ftk(l.braceR);case 58:return++this.pos,this.ftk(l.colon);case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(e);case 34:case 39:return this.readString(e);case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e)}++this.pos,console.warn(this.pos,"Unexpected character '"+e+"'")}readWord(){let e,t="";for(;(e=this.input[this.pos])&&e.match(/[a-zA-Z0-9\_\$]/);)t+=e,this.pos++;let s=l.name;return u.includes(t)&&(s=t),this.ftk(s,t)}readToken_lt_gt(e){let t=this.gnc(),s=1;return t===e?(s=62===e&&62===this.gnc(2)?3:2,61===this.gnc(s)?this.finishOp(l.assign,s+1):this.finishOp(l.bitShift,s)):(61===t&&(s=2),this.finishOp(l.relational,s))}readNumber(e){let t=0;for(;e>47&&e<58||46===e;)t++,e=this.gnc(t);return this.finishOp(l.num,parseFloat(t))}readString(e){const t=e;let s="";for(e=this.gnc();e!==t;)s+=this.input[++this.pos],e=this.gnc();return this.pos=this.pos+2,this.ftk(l.string,s)}readToken_mult_modulo_exp(e){let t=this.gnc();const s=42===e?l.star:l.modulo;return 61===t?(pos++,this.finishOp(l.assign,2)):this.finishOp(s,1)}finishOp(e,t){let s=this.input.substring(this.pos,this.pos+t);return this.pos+=t,this.ftk(e,s)}ftk(e,t){this.tokens.push({type:e,value:t})}readToken_pipe_amp(e){return this.gnc()===e?this.finishOp(124===e?l.logicalOR:l.logicalAND,2):this.finishOp(124===e?l.bitwiseOR:l.bitwiseAND,1)}readToken_dot(){let e=this.gnc();return e>=48&&e<=57?this.readNumber(!0):(this.pos++,this.ftk(l.dot))}gnc(e=1){return this.input[this.pos+e].charCodeAt()}readToken_plus_min(e){let t=this.gnc();return t===e?this.finishOp(l.incDec,2):61===t?this.finishOp(l.assign,2):this.finishOp(l.plusMin,1)}readToken_eq_excl(e){return 61===this.gnc()?this.finishOp(l.equality,61===this.gnc(2)?3:2):this.finishOp(61===e?l.eq:l.prefix,1)}}class m{tokens=[];index=-1;constructor(e){this.tokens=e}parse(){return this.nextToken(),this.parseTopLevel({body:[]})}eat(e){return this.type===e&&(this.next(),!0)}nextToken(){this.token=this.tokens[++this.index],this.type=this.token&&this.token.type,this.value=this.token&&this.token.value}finishNode(e,t){return e.type=t,e}parseTopLevel(e){for(;this.type;){let t=this.parseStatement(!0);e.body.push(t)}return this.finishNode(e,"Program")}parseStatement(e){let t={};switch(this.type){case l._break:case l._continue:return this.parseBreakContinueStatement(t,this.value);case l._for:return this.parseForStatement(t);case l._function:return this.next(),this.parseFunctionStatement(t);case l._if:return this.parseIfStatement(t);case l._return:return this.parseReturnStatement(t);case l._const:case l._var:case l._let:return this.parseVarStatement(t,this.value);case l.braceL:return this.parseBlock(t);case l.semi:return this.parseEmptyStatement(t);default:let e=this.parseExpression();return this.parseExpressionStatement(t,e)}}parseExpressionStatement(e,t){return e.expression=t,this.eat(l.semi),this.finishNode(e,"ExpressionStatement")}parseEmptyStatement(e){return this.next(),this.finishNode(e,"EmptyStatement")}parseVarStatement(e,t){return this.next(),this.parseVar(e,!1,t),this.eat(l.semi),this.finishNode(e,"VariableDeclaration")}parseVar(e,t,s){for(e.declarations=[],e.kind=s;;){let r={};if(this.parseVarId(r,s),this.eat(l.eq)?r.init=this.parseMaybeAssign(t):r.init=null,e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(l.comma))break}return e}parseIdent(){let e={};return this.type===l.name?e.name=this.value:this.raise("无法处理的token"),this.next(),this.finishNode(e,"Identifier")}parseMaybeAssign(e){let t=this.parseMaybeConditional(e);if(this.isAssign()){let s={};return s.operator=this.value,s.left=t,this.next(),s.right=this.parseMaybeAssign(e),this.finishNode(s,"AssignmentExpression")}return t}parseMaybeConditional(e){let t=this.parseExprOps(e);if(this.eat(l.question)){let s={};return s.test=t,s.consequent=this.parseMaybeAssign(),this.expect(l.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return t}parseExprOps(e){let t=this.parseMaybeUnary(e);return this.parseExprOp(t,-1,e)}parseExprOp(e,t,s){let r=d[this.type];if(r&&!s&&r>t){let n=this.type===l.logicalOR||this.type===l.logicalAND,i=this.type===l.coalesce,o=this.value;this.next();let a=this.parseExprOp(this.parseMaybeUnary(s),r,s),p=this.buildBinary(e,a,o,n||i);return this.parseExprOp(p,t,s)}return e}buildBinary(e,t,s,r){let n={};return n.left=e,n.operator=s,n.right=t,this.finishNode(n,r?"LogicalExpression":"BinaryExpression")}parseMaybeUnary(e){let t;if([l.incDec,l.prefix,l.plusMin].includes(this.type)){let s={},r=this.type===l.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(e),t=this.finishNode(s,r?"UpdateExpression":"UnaryExpression")}else for(t=this.parseExprSubscripts(e);this.type===l.incDec;){let e={};e.operator=this.value,e.prefix=!1,e.argument=t,this.next(),t=this.finishNode(e,"UpdateExpression")}return t}parseExprSubscripts(e){let t=this.parseExprAtom(e);return this.parseSubscripts(t,!1,e)}parseSubscript(e,t){let s=this.eat(l.bracketL);if(s||this.eat(l.dot)){let t={};t.object=e,s?(t.property=this.parseExpression(),this.expect(l.bracketR)):t.property=this.parseIdent(),t.computed=!!s,e=this.finishNode(t,"MemberExpression")}else if(!t&&this.eat(l.parenL)){let t=this.parseExprList(l.parenR),s={};s.callee=e,s.arguments=t,e=this.finishNode(s,"CallExpression")}return e}parseExpression(e){let t=this.parseMaybeAssign(e);if(this.type===l.comma){let s={};for(s.expressions=[t];this.eat(l.comma);)s.expressions.push(this.parseMaybeAssign(e));return this.finishNode(s,"SequenceExpression")}return t}parseSubscripts(e,t){for(;;){let s=this.parseSubscript(e,t);if(s===e)return s;e=s}}parseLiteral(e){let t=this.finishNode({value:(this.type===l.string?String:parseFloat)(e)},"Literal");return this.next(),t}parseExprAtom(e){let t={};switch(this.type){case l.name:return this.parseIdent(!1);case l.num:case l.string:return this.parseLiteral(this.value);case l._null:case l._true:case l._false:return t.value=this.type===l._null?null:this.type===l._true,t.raw=this.type,this.next(),this.finishNode(t,"Literal");case l.parenL:return this.parseParenAndDistinguishExpression(e);case l.bracketL:return this.next(),t.elements=this.parseExprList(l.bracketR),this.finishNode(t,"ArrayExpression");case l.braceL:return this.parseObj(!1);case l._function:return this.next(),this.parseFunctionStatement(t);default:this.raise("无法处理的token"+this.type)}}parseObj(e){let t={},s=!0;for(t.properties=[],this.next();!this.eat(l.braceR);){s?s=!1:this.expect(l.comma);const r=this.parseProperty(e);t.properties.push(r)}return this.finishNode(t,e?"ObjectPattern":"ObjectExpression")}parseProperty(){let e={};return e.key=this.type===l.num||this.type===l.string?this.parseExprAtom():this.parseIdent(),this.eat(l.colon)?(e.value=this.parseMaybeAssign(!1),e.kind="init"):this.raise("属性名后无效属性"),this.finishNode(e,"Property")}parseParenAndDistinguishExpression(){return this.parseParenExpression()}parseVarId(e){e.id=this.parseIdent()}parseReturnStatement(e){return this.next(),this.eat(l.semi)||this.eat(l.braceR)?e.argument=null:e.argument=this.parseExpression(),this.finishNode(e,"ReturnStatement")}parseIfStatement(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(),e.alternate=this.eat(l._else)?this.parseStatement():null,this.finishNode(e,"IfStatement")}parseParenExpression(){this.expect(l.parenL);let e=this.parseExpression();return this.expect(l.parenR),e}parseFunctionStatement(e){return e.id=this.type!==l.name?null:this.parseIdent(),this.parseFunctionParams(e),this.parseFunctionBody(e),this.finishNode(e,"FunctionDeclaration")}parseFunctionParams(e){this.expect(l.parenL),e.params=this.parseBindingList(l.parenR,!1)}parseFunctionBody(e){e.body=this.parseBlock(void 0)}parseBlock(e={}){for(e.body=[],this.expect(l.braceL);this.type&&this.type!==l.braceR;){let t=this.parseStatement();e.body.push(t)}return this.next(),this.finishNode(e,"BlockStatement")}parseBindingList(e){let t=[],s=!0;for(;!this.eat(e);){s?s=!1:this.expect(l.comma);let e=this.parseMaybeDefault();t.push(e)}return t}parseExprList(e){let t=[],s=!0;for(;!this.eat(e);)s?s=!1:this.expect(l.comma),t.push(this.parseMaybeAssign(!1));return t}parseMaybeDefault(e){if(e=e||this.parseIdent(),!this.eat(l.eq))return e;let t={};return t.left=e,t.right=this.parseMaybeAssign(),this.finishNode(t,"AssignmentPattern")}parseBreakContinueStatement(e,t){let s="break"===t;return this.next(),this.finishNode(e,s?"BreakStatement":"ContinueStatement")}next(){this.nextToken()}parseForStatement(e){if(this.next(),this.expect(l.parenL),this.type===l.semi)return this.parseFor(e,null);if([l._const,l._var,l._let].includes(this.type)){let t={kind:this.type};return this.next(),this.parseVar(t,!0,t.kind),this.finishNode(t,"VariableDeclaration"),this.parseFor(e,t)}let t=this.parseExpression(!0);return this.parseFor(e,t)}isAssign(){return[l.assign,l.eq].includes(this.type)}raise(e){throw new Error(e)}parseFor(e,t){return e.init=t,this.expect(l.semi),e.test=this.type===l.semi?null:this.parseExpression(),this.expect(l.semi),e.update=this.type===l.parenR?null:this.parseExpression(),this.expect(l.parenR),this.parseBlock(e),this.finishNode(e,"ForStatement")}expect(e){this.eat(e)||this.raise("unsupport type"+e)}}let g=0;const y={},x={},b={result:void 0},k={Program:(e,t)=>{for(const s of e.body)$(s,t)},Identifier:(e,t)=>{if("undefined"===e.name)return;const s=t.$find(e.name);if(s)return s.$get();throw`[Error] 变量'${e.name}' 未定义`},Literal:e=>e.value,BlockStatement:(e,t)=>{let s=t.invasived?t:new _("block",t);for(const t of e.body){const e=$(t,s);if(e===y||e===x||e===b)return e}},EmptyStatement:()=>{},ExpressionStatement:(e,t)=>{$(e.expression,t)},ReturnStatement:(e,t)=>(b.result=e.argument?$(e.argument,t):void 0,b),BreakStatement:()=>y,ContinueStatement:()=>x,IfStatement:(e,t)=>$(e.test,t)?$(e.consequent,t):e.alternate?$(e.alternate,t):void 0,ForStatement:(e,t)=>{const s=new _("loop",t);for(e.init&&$(e.init,s);!e.test||$(e.test,s);e.update?$(e.update,s):void 0){const t=$({type:"BlockStatement",body:e.body},s);if(t===y)break;if(t!==x&&t===b)return t}},FunctionDeclaration:(e,t)=>{const s=k.FunctionExpression(e,t),{name:r}=e.id||{name:"anonymous"+g++};if(!t.$const(r,s))throw`[Error] ${r} 重复定义`;return s},VariableDeclaration:(e,t)=>{const s=e.kind;for(const r of e.declarations){const{name:e}=r.id,n=r.init?$(r.init,t):void 0;if(!t.$declar(s,e,n))throw`[Error] ${e} 重复定义`}},ThisExpression:(e,t)=>{const s=t.$find("this");return s?s.$get():null},ArrayExpression:(e,t)=>e.elements.map((e=>$(e,t))),ObjectExpression:(e,t)=>{const s={};for(const r of e.properties){const e=r.kind;let n;"Literal"===r.key.type?n=$(r.key,t):"Identifier"===r.key.type&&(n=r.key.name);const i=$(r.value,t);"init"===e?s[n]=i:"set"===e?Object.defineProperty(s,n,{set:i}):"get"===e&&Object.defineProperty(s,n,{get:i})}return s},FunctionExpression:(e,t)=>function(...s){const r=new _("function",t);r.invasived=!0;for(let t=0;t<e.params.length;t++){const{name:n}=e.params[t];r.$const(n,s[t])}r.$const("this",this),r.$const("arguments",arguments);const n=$(e.body,r);if(n===b)return n.result},UnaryExpression:(e,t)=>({"-":()=>-$(e.argument,t),"+":()=>+$(e.argument,t),"!":()=>!$(e.argument,t),"~":()=>~$(e.argument,t)}[e.operator]()),UpdateExpression:(e,t)=>{const{prefix:s}=e;let r;if("Identifier"===e.argument.type){const{name:s}=e.argument;if(r=t.$find(s),!r)throw`${s} 未定义`}else if("MemberExpression"===e.argument.type){const s=e.argument,n=$(s.object,t);let i=s.computed?$(s.property,t):s.property.name;r={$set:e=>(n[i]=e,!0),$get:()=>n[i]}}return{"--":e=>(r.$set(e-1),s?--e:e--),"++":e=>(r.$set(e+1),s?++e:e++)}[e.operator]($(e.argument,t))},BinaryExpression:(e,t)=>({"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"&":(e,t)=>e&t,in:(e,t)=>e in t,instanceof:(e,t)=>e instanceof t}[e.operator]($(e.left,t),$(e.right,t))),AssignmentExpression:(e,t)=>{let s;if("Identifier"===e.left.type){const{name:r}=e.left,n=t.$find(r);if(!n)throw`${r} 未定义`;s=n}else{if("MemberExpression"!==e.left.type)throw"如果出现在这里，那就说明有问题了";{const r=e.left,n=$(r.object,t);let i=r.computed?$(r.property,t):r.property.name;s={$set:e=>(n[i]=e,!0),$get:()=>n[i]}}}return{"=":e=>(s.$set(e),e),"+=":e=>(s.$set(s.$get()+e),s.$get()),"-=":e=>(s.$set(s.$get()-e),s.$get()),"*=":e=>(s.$set(s.$get()*e),s.$get()),"/=":e=>(s.$set(s.$get()/e),s.$get()),"%=":e=>(s.$set(s.$get()%e),s.$get()),"|=":e=>(s.$set(s.$get()|e),s.$get()),"^=":e=>(s.$set(s.$get()^e),s.$get()),"&=":e=>(s.$set(s.$get()&e),s.$get())}[e.operator]($(e.right,t))},LogicalExpression:(e,t)=>({"||":()=>$(e.left,t)||$(e.right,t),"&&":()=>$(e.left,t)&&$(e.right,t)}[e.operator]()),MemberExpression:(e,t)=>{const{object:s,property:r,computed:n}=e;return n?$(s,t)[$(r,t)]:$(s,t)[r.name]},ConditionalExpression:(e,t)=>$(e.test,t)?$(e.consequent,t):$(e.alternate,t),CallExpression:(e,t)=>{const s=$(e.callee,t),r=e.arguments.map((e=>$(e,t)));if("MemberExpression"===e.callee.type){const n=$(e.callee.object,t);return s.apply(n,r)}{const e=t.$find("this");return s.apply(e?e.$get():null,r)}},NewExpression:(e,t)=>{const s=$(e.callee,t),r=e.arguments.map((e=>$(e,t)));return new(s.bind.apply(s,[null].concat(r)))},SequenceExpression:(e,t)=>{let s;for(const r of e.expressions)s=$(r,t);return s}};class E{value;kind;constructor(e,t){this.value=t,this.kind=e}$set(e){return"const"!==this.value&&(this.value=e,!0)}$get(){return this.value}}class _{content;parent;type;invasived;prefix="";constructor(e,t){this.type=e,this.parent=t||null,this.content={},this.invasived=!1}$find(e){const t=this.prefix+e;return this.content.hasOwnProperty(t)?this.content[t]:this.parent?this.parent.$find(e):null}$let(e,t){const s=this.prefix+e;return!this.content[s]&&(this.content[s]=new E("let",t),!0)}$const(e,t){const s=this.prefix+e;return!this.content[s]&&(this.content[s]=new E("const",t),!0)}$var(e,t){const s=this.prefix+e;let r=this;for(;null!==r.parent&&"function"!==r.type;)r=r.parent;return!r.content[s]&&(this.content[s]=new E("var",t),!0)}$declar(e,t,s){return{var:()=>this.$var(t,s),let:()=>this.$let(t,s),const:()=>this.$const(t,s)}[e]()}}const $=(e,t,s)=>{const r=k[e.type]||(e=>{console.log("不支持的node"+JSON.stringify(e,null,2))});return r(e,t,s)},N={console,setTimeout,setInterval,clearTimeout,clearInterval,encodeURI,encodeURIComponent,decodeURI,decodeURIComponent,Infinity:1/0,NaN:NaN,isFinite,isNaN,parseFloat,parseInt,Object,Boolean,Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,Number,Math,Date,String,RegExp,Array,JSON,Promise},v={text:(e,t)=>({content:t?t[0]:""})},S=(e,t,...s)=>{let r={};return v[e]&&(r=v[e](t,s)),s=(s=s.flat&&s.flat(1)||s).map((e=>"string"==typeof e||"number"==typeof e?{naruseType:"text",content:e}:e)),{naruseType:e,...t,childNodes:s,...r}};let O=1;const R=function(r,n){if(this.props.code===this.code)return;console.log("[naruse-element] didUpdate 更新"),this.code=this.props.code;const o=this.$page.requireList||{},a=((e,t={})=>{const s=new _("block");s.$const("this",void 0);for(const e of Object.getOwnPropertyNames(N))s.$const(e,N[e]);for(const e of Object.getOwnPropertyNames(t))s.$const(e,t[e]);const r={};s.$const("exports",r);const n=new f(e);n.scan();const i=new m(n.tokens);return $(i.parse(),s),r})(this.props.code,{h:S,require:s(79),my,getApp,...o});this.naruseComponentId=O++;const p=new t(a,O),[h,c]=p._render();this.setData({node:i(h,null)},(()=>{c()})),this.reRenderCallBack=()=>{console.log("[naruse-element] 重新渲染");const[e,t]=p._render();this.setData({node:i(e,null)},t)},e.on(`update-${this.naruseComponentId}`,this.reRenderCallBack)};Component({mixins:[{...h,didMount(){if(console.log("[naruse-element] didMount 装载"),this.props.code)try{R.call(this)}catch(e){console.error("[naruse-element] 初始化失败",e)}},didUpdate(){try{R.call(this)}catch(e){console.error("[naruse-element] 更新失败",e)}},didUnmount(){console.log("[naruse-element] didUnmount 卸载"),e.off(`update-${this.naruseComponentId}`,this.reRenderCallBack)}}]})})();